<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCS iON Attendance Test - Bunk Mate Extension</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f5f5f5;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
            background-color: #fafafa;
        }
        .test-section h3 { 
            margin-top: 0; 
            color: #333;
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 10px 0; 
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: left; 
        }
        th { 
            background-color: #f2f2f2; 
            font-weight: bold;
        }
        .highlight { 
            background-color: #ffffcc; 
            font-weight: bold;
        }
        .instructions {
            background-color: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin-bottom: 20px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ TCS iON Attendance Test Page</h1>
        <p>This page simulates various TCS iON attendance data formats to test the Bunk Mate extension.</p>
        
        <div class="instructions">
            <h3>üìã How to Test:</h3>
            <ol>
                <li>Make sure the Bunk Mate extension is installed and active</li>
                <li>Open the extension popup by clicking the Bunk Mate icon</li>
                <li>Click "Detect from TCS iON" in the popup</li>
                <li>The extension should automatically detect the attendance data below</li>
                <li>Check the browser console (F12) for detailed debug information</li>
            </ol>
        </div>

        <div id="testResults" class="status info" style="display: none;">
            <h4>üß™ Test Results:</h4>
            <div id="resultsContent"></div>
        </div>

        <button onclick="runExtensionTest()">üöÄ Test Extension Detection</button>
        <button onclick="showDebugInfo()">üîç Show Debug Info</button>
        <button onclick="location.reload()">üîÑ Reload Page</button>

        <!-- Test Format 1: Basic Table Format -->
        <div class="test-section">
            <h3>Test Format 1: Basic Table</h3>
            <table class="attendance-table">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Total Classes</th>
                        <th>Classes Attended</th>
                        <th>Percentage</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Mathematics</td>
                        <td class="highlight">45</td>
                        <td class="highlight">38</td>
                        <td>84.4%</td>
                    </tr>
                    <tr>
                        <td>Physics</td>
                        <td>40</td>
                        <td>32</td>
                        <td>80.0%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Test Format 2: Summary Style -->
        <div class="test-section">
            <h3>Test Format 2: Attendance Summary</h3>
            <div class="attendance-summary">
                <p><strong>Total Classes Conducted:</strong> <span class="highlight">50</span></p>
                <p><strong>Classes Attended:</strong> <span class="highlight">42</span></p>
                <p><strong>Attendance Percentage:</strong> 84.0%</p>
            </div>
        </div>

        <!-- Test Format 3: Fraction Format -->
        <div class="test-section">
            <h3>Test Format 3: Fraction Format</h3>
            <div class="report-content">
                <p>Your attendance record shows you have attended <strong class="highlight">35/40</strong> classes this semester.</p>
                <p>Current attendance: 87.5%</p>
            </div>
        </div>

        <!-- Test Format 4: Academic Report Style -->
        <div class="test-section">
            <h3>Test Format 4: Academic Report</h3>
            <div class="academic-report">
                <table class="report-table">
                    <tr>
                        <td><strong>Total Lectures:</strong></td>
                        <td class="highlight">48</td>
                    </tr>
                    <tr>
                        <td><strong>Lectures Attended:</strong></td>
                        <td class="highlight">41</td>
                    </tr>
                    <tr>
                        <td><strong>Absent:</strong></td>
                        <td>7</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Test Format 5: Mixed Text Format -->
        <div class="test-section">
            <h3>Test Format 5: Text-based Report</h3>
            <div class="student-report">
                <p>Student Attendance Report</p>
                <p>Total: <span class="highlight">52</span> classes were conducted in this term.</p>
                <p>Present: You attended <span class="highlight">46</span> classes.</p>
                <p>Absent: You missed 6 classes.</p>
                <p>Your overall attendance is 88.5%</p>
            </div>
        </div>

        <!-- Test Format 6: "Out of" Format -->
        <div class="test-section">
            <h3>Test Format 6: "Out of" Format</h3>
            <div class="content-panel">
                <p>You have attended <strong class="highlight">43 out of 50</strong> classes this semester.</p>
                <p>Attendance status: Good (86.0%)</p>
            </div>
        </div>
    </div>

    <script>
        // Test function to simulate extension behavior
        function runExtensionTest() {
            const resultDiv = document.getElementById('testResults');
            const contentDiv = document.getElementById('resultsContent');
            
            resultDiv.style.display = 'block';
            contentDiv.innerHTML = '<p>üîÑ Running detection test...</p>';
            
            setTimeout(() => {
                // Simulate the extension's extraction logic
                const results = [];
                
                // Test each format
                const formats = [
                    { name: 'Basic Table', selector: '.attendance-table', expected: { total: 45, attended: 38 } },
                    { name: 'Summary Style', selector: '.attendance-summary', expected: { total: 50, attended: 42 } },
                    { name: 'Fraction Format', selector: '.report-content', expected: { total: 40, attended: 35 } },
                    { name: 'Academic Report', selector: '.academic-report', expected: { total: 48, attended: 41 } },
                    { name: 'Text-based Report', selector: '.student-report', expected: { total: 52, attended: 46 } },
                    { name: '"Out of" Format', selector: '.content-panel', expected: { total: 50, attended: 43 } }
                ];
                
                formats.forEach(format => {
                    const element = document.querySelector(format.selector);
                    if (element) {
                        const text = element.textContent;
                        const numbers = text.match(/\d+/g);
                        if (numbers && numbers.length >= 2) {
                            const nums = numbers.map(n => parseInt(n));
                            results.push(`‚úÖ ${format.name}: Found numbers ${nums.join(', ')}`);
                        } else {
                            results.push(`‚ùå ${format.name}: No numbers found`);
                        }
                    }
                });
                
                contentDiv.innerHTML = `
                    <p><strong>Detection Results:</strong></p>
                    ${results.map(r => `<p>${r}</p>`).join('')}
                    <p><strong>Note:</strong> If the extension is working, it should detect one of these formats automatically.</p>
                `;
            }, 1000);
        }
        
        function showDebugInfo() {
            console.log('üîç TCS iON Test Page Debug Information');
            console.log('=====================================');
            console.log('Page URL:', window.location.href);
            console.log('Page Title:', document.title);
            
            // Show all tables
            const tables = document.querySelectorAll('table');
            console.log(`Found ${tables.length} tables:`);
            tables.forEach((table, i) => {
                console.log(`Table ${i + 1}:`, table.textContent.replace(/\s+/g, ' ').trim());
            });
            
            // Show all highlighted numbers
            const highlights = document.querySelectorAll('.highlight');
            console.log(`Found ${highlights.length} highlighted elements:`);
            highlights.forEach((el, i) => {
                console.log(`Highlight ${i + 1}:`, el.textContent);
            });
            
            console.log('=====================================');
            alert('Debug information logged to console. Press F12 to view.');
        }
        
        // Automatically log page info when loaded
        window.addEventListener('load', () => {
            console.log('üéØ TCS iON Test Page Loaded');
            console.log('This page contains multiple attendance data formats for testing the Bunk Mate extension.');
            console.log('Use the extension popup to test auto-detection, or call showDebugInfo() for details.');
        });
    </script>
</body>
</html>
