<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bunk Mate</title>
    <link rel="stylesheet" href="src/styles/popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🎯 Bunk Mate</h1>
            <div class="subtitle">How many classes can you safely bunk?</div>
        </div>

        <div class="content">
            <!-- Auto-Detection Status - Minimal -->
            <div class="detection-status" id="autoDetection">
                <span class="icon" id="autoIcon">🔍</span>
                <span class="text" id="autoStatus">Detecting attendance...</span>
            </div>

            <!-- MVP: THE BUNK CALCULATOR -->
            <div class="bunk-calculator-hero" id="bunkCalculator">
                <!-- Quick Stats (from TCS data or manual) -->
                <div class="quick-stats hidden" id="attendanceDisplay">
                    <div class="stat">
                        <span class="value" id="currentPercentage">--</span>
                        <span class="label">Current %</span>
                    </div>
                    <div class="stat">
                        <span class="value" id="presentCount">--</span>/<span id="totalCount">--</span>
                        <span class="label">Present/Total</span>
                    </div>
                </div>

                <!-- THE MAIN EVENT: Bunk Calculator -->
                <div class="bunk-hero">
                    <div class="hero-title">🚀 Safe Bunk Calculator</div>
                    
                    <div class="target-setting">
                        <label>Keep attendance above:</label>
                        <div class="percentage-input">
                            <input type="number" id="targetPercentage" value="75" min="50" max="100">
                            <span>%</span>
                        </div>
                    </div>
                    
                    <button class="calculate-hero-btn" id="calculateBunks">
                        <span class="btn-icon">🎯</span>
                        Calculate My Safe Bunks
                    </button>
                    
                    <!-- THE MONEY SHOT - Bunk Result -->
                    <div class="bunk-result-hero hidden" id="bunkResult">
                        <div class="result-big">
                            <div class="result-number" id="bunkCount">0</div>
                            <div class="result-label">Safe Bunks</div>
                        </div>
                        <div class="result-message" id="bunkMessage">
                            You can safely skip <strong id="bunkCountText">0</strong> more classes!
                        </div>
                        <div class="result-subtext" id="bunkSubtext">
                            While maintaining <span id="targetDisplay">75</span>% attendance
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fallback: Manual Input (Collapsible) -->
            <div class="manual-fallback">
                <details>
                    <summary>📝 Manual Input (if auto-detection fails)</summary>
                    <div class="manual-inputs">
                        <div class="input-group">
                            <input type="number" id="attendedClasses" placeholder="Classes attended" min="0">
                            <input type="number" id="totalClasses" placeholder="Total classes" min="1">
                        </div>
                        <button class="manual-update-btn" id="calculate">Update Data</button>
                    </div>
                </details>
            </div>

            <!-- Status Messages -->
            <div id="statusMessage" class="status-message hidden"></div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="tagline">Focus on what matters: <strong>How many can I bunk?</strong></div>
            <div class="author">Made with ❤️ by <a href="https://github.com/4-krishna" target="_blank">@4-krishna</a> & <a href="https://github.com/devag7" target="_blank">@devag7</a></div>
        </div>
    </div>

    <script src="src/scripts/popup.js"></script>
</body>
</html>
